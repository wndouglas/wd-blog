---
title: Is Your Student Loan Worth Paying Off Early?
path: /is-your-student-loan-worth-paying-off-early
category: Personal Finance
post_type: blog
date: 2020-05-28
---

If you're like me (an English or Welsh student who started an undergraduate 
degree anywhere in the UK on or after 1 September 2012 and you took out 
a student loan to help cover your fees), you probably find yourself with a 
significant student loan to your name. Most people I know have come to terms 
with this fact. They treat their loan as an additional *tax* that they will 
have to pay for 30 years after they start working. But is this the best strategy 
for everyone? 

By building a simple **repayment model**, in this post we will investigate 
whether the passive strategy of letting the minimum repayment come out of your 
paycheck automatically is an effective strategy from an investment point of 
view, or whether a student loan holder is better off 
making **early repayment contributions**.

## Simplifying the Terms of the Loan
Looking at the student 
finance <a href="https://www.gov.uk/student-finance">website</a>, you're
presented by a confusing and messy page explaining how repayment works. In
reality, it's *not* that complicated. Here's how it works.

#### How repayment works

If, like me, your course started after 1 September 2012, you have a **Plan 2**
loan. This just means that you will start repaying your loan the first **April** 
after you finish studying, and you will *only* pay anything if your current **gross**
income is over £26,575 a year (or £2,215) a month. You will then pay 9% 
of your gross income **in excess** of this threshold each payment period. If you are 
paid a monthly salary and you earn £2,315 per month, you would then repay 
9% of £2,315 - £2,215 = £100, which is £9 per month.

If you're looking at that £9 per month and thinking 'that doesn't seem like much,
I spend that much on Netflix', I'd firstly recommend jumping in on your parent's
Netlfix account, but I would also recommend **voluntary repayments**. You have 
the right to make extra contributions to your repayment on top of the automatic 
contribution at any time, provided that this payment is larger than £5.

Finally, if you still have an outstanding student loan after 30 years, your 
loan is **written off** and your 50 year old self can relax in the knowledge 
that the last trace of your naive student years is behind you.

#### How the interest works
It is important to realise here that even while you are studying, your loan is
accruing **interest**. While you study, your rate of interest is the UK RPI plus
3%. At the time of writing, UK RPI is at 2.4%. So if you are still studying you 
are paying 5.4% in interest.

Once you are eligible for repayment, you are charged an interest of RPI, plus
an extra sliding charge of between 0% for those earning £26,575 per year or less 
up to 3% for those earning over £47,835 per year. The exact way that the 
additional rate scales from 0% to 3% turns out to be incredibly difficult to 
find in the student finance documents. From a modelling perspective, we will
assume a linear scale between 0% and 3%.

An important detail that doesn't seem to get mentioned anywhere online or on
the student finance documents is the **interest rate schedule** of these interest
payments. According 
to <a href="https://www.ft.com/content/0c56a3ee-60e4-11e7-91a7-502f7ee26895">this</a>
article in the FT, the repayments are **monthly**, and **compound**. To me, this
is an egregious lack of transparency from the government. I spent the good part
of an hour searching for this information, and the only source I could find
was in a subscription newspaper that many students have no access to. The article
shares my view and states that the details of the interest payments is 'hidden in
the small print'. But I digress.

## Building the Model
In order to analyse various different strategies of repayment, it is important 
to lay down both some notation, and also some criteria for comparing approaches. 

#### Notation
In the following, we denote the **total outstanding debt** at the point of 
starting repayment by £$D$. For most students who studied a 3 year undergraduate 
degree after 1 September 2012 and took out a full tuition and maintenance loan,
this quantity will be in the region of £40,000. We denote the 
**total amount paid** towards the loan across its lifetime by £$P$.

Since interest payments and most professional's salaries are paid monthly,
we consider a debtor's **gross monthly salary**. In the $n$th month of repayment 
we will denote this by £$s(n)$ and we will denote the **total outstanding debt** 
in the same month by £$d(n)$. Clearly $d(0) = D$. We then denote the 
**automatic contributions** made towards the loan in the $n$th month by 
$p_a(n)$, and the **voluntary contributions** by $p_v(n)$, giving a 
**total contribution** in month $n$ of $p(n) := p_a(n) + p_v(n)$. Finally, we 
denote the interest accrued on the loan in the $n$th month by $i(n)$.

Next, we denote the **nominal annual rate** on the loan in month $n$ by $r(n)$. 
This is the headline figure of RPI plus an extra rate that we saw above. We
break this rate down into the sum of an **inflation linked component** $r_i(n)$,
and an additional, salary dependent component $r_a(n)$. Assuming a linear scale
between the lower and upper yearly salary thresholds of £26,575 and £47,835, 
which we denote by their equivalent monthly salary figures $l_i$ and $u_i$ 
respectively, we have

$$
r_a(n) = 
\begin{cases}
0, & s(n) < l_i, \\
\frac{0.03}{u_i-l_i}\left(s(n)- l_i\right), & l_i \le s(n) \le u_i, \\
0.03, & s(n) > u_i.
\end{cases}
$$

We then have

$$
r(n) = r_i(n) + r_a(n).
$$ 

Since the interest is charged monthly and is compound, we find that the interest
owed in month $n+1$ is given by

$$
i(n+1) = \frac{r(n)}{12} d(n).
$$

Furthermore, letting the lower repayment threshold be denoted by 
$l_r = £2215 = £26,575/12$, the automatic repayment contribution in month $n+1$ 
is given by

$$
p_a(n+1) =
\begin{cases}
0, & s(n) < l_r,\\
0.09(s(n) - l_r), & s(n) \ge l_r.
\end{cases}
$$

In the following, we will assume that $s(n) \ge l_r$ for each month $n$. It
seems unreasonable to attempt to model the best strategy of paying off your
student loan if you're aren't even earning enough to start paying it off in the
first place!

We're finally ready to give an expression for the outstanding debt at time $n+1$ 
in terms of the quantities in month $n$. This quantity is the sum of the debt 
in month $n$ and the interest accrued in month $n$, minus the payment made at 
the start of month $n+1$. Thus, we have

$$
\begin{aligned}
    d(n+1) & = d(n) + i(n+1) - p(n+1) \\
    & = \left(1 + \frac{r(n)}{12}\right)d(n) - p(n+1).
\end{aligned}
$$

The mathematically inclined will notice that the above represents
a difference equation, the discrete time version of an ordinary differential
equation (ODE). If the repayment term $p(n+1)$ vanished, the above
would simply represent the discrete-time equivalent of an exponential growth 
model, just like any compound investment. All of this is a fancy way of saying 
that if your monthly repayments $p(n+1)$ are not sufficient to outpace the 
interest rate $r(n)$, then you will find yourself on the wrong side of an 
exponential growth curve, and you will *very* quickly find that your student 
debt blows so far out of proportion that early repayment becomes practically 
impossible.

Finally, the total amount paid during the lifetime of the loan is given by

$$
P = \sum_{n=1}^N p(n),
$$

where $N$ is the minimum of 360 months (the 30 years before the loan is written
off) and the first $n$ such that $d(n)$ hits zero, i.e.

$$
N := \min\left(360, \min_n \{d(n) \le 0 \}\right).
$$

#### Comparing strategies
Now that we have the notation in place, it is easy to define a **repayment
strategy**. By repayment strategy, I refer to a sequence of additional
repayment contributions $p_a(1),\ldots,p_a(N)$, where clearly, each of 
the $p_a(n) \ge 0$. 

I think a good yard-stick for a strategy is the **effective rate of interest** 
you end up paying throughout the lifetime of your loan. This value 
essentially represents a yearly **return** that the government makes off of you
during the lifetime of your loan, and hence its negation can be seen as 
your return. Starting with a loan of £$D$, if you were to to pay off your loan 
in $N$ months and to pay a total amount of $£P$ across the lifetime of the loan 
in doing so, then we could say that you paid a nominal annual rate $R_m$ 
with monthly compounding, where $R_m$ satisfies

$$
\left(1 + \frac{R_m}{12}\right)^N \cdot D = P,
$$
or, upon rearranging,

$$
R_m = 12 \left[\left(\frac{P}{D}\right)^{1/N} - 1\right].
$$

To get the effective rate of interest $R$, we then find

$$
R = \left(1 + \frac{R_m}{12}\right)^{12} - 1.
$$
Upon using the above expression for $R_m$, this gives

$$
R = \left( \frac{P}{D}\right)^{12/N} - 1.
$$

Hopefully it is clear that this formula is consistent with reality. If you
decided to pay off your entire student loan in the first month of repayment
(perhaps you had the ability to take out another loan with better terms 
elsewhere), then you would accrue no interest, close out your loan, and pay
$P=D$, giving an effective rate of $R=0$, as you might expect.

#### Assumptions
While the framework we have built above is fairly general and allows for a lot
of flexibility in the various different parameters, in order to generate useful
results that we can easily compare, we need to add some assumptions and 
constraints. The aim in this analysis is to give **ballpark figures** for the 
effective interest rates of different strategies, not exact values. What is 
important is that the effectiveness of various strategies **relative** to one 
another is accurately modeled, not necessarily the **absolute** values 
themselves.

A few assumptions have already been *baked in*. One of these is that the maximum
additional interest rate one pays will always be 3% and that the upper and lower
thresholds will remain where they are. The government is capable of changing 
these figures and has done so periodically. Nonetheless, building a model to 
predict where these values are headed in the coming weeks and months is beyond 
the scope of this post, and would be of questionable utility anyway.

An assumption I believe is reasonable is that RPI will remain close to its 
historic average.

import RPI from '../../src/components/post_components/student-debt-photos'

<RPI/>

The above plot shows RPI figures for the years 1990-2019. Observe that the values
tend to oscillate around a mean value of 3%. Hence, we will use an RPI of 3% in
our model. I would also argue that a precise estimate of the RPI figure is 
unnecessary. Any increase in RPI that leads to an increase in the 
rate charged on the loan *should* be offset by a corresponding increase in one's
salary.

The next assumption is perhaps the most restrictive but will be very useful
in terms of simplifying our model. We will assume that salary **raises occur 
monthly and at a constant nominal annual rate** of $a_m$. Of course normally 
people get raises occur once a year. There *will* be a slight difference in the 
results  using monthly increases compared to yearly, but again, our purpose 
here is to come up with a tractable model. If a reasonable yearly increase is 
$a$, then we can convert this to a monthly rate $a_m$ via

$$
    a_m = 12\left(\left(1 + a\right)^{1/12} - 1\right).
$$

For example, if we assume a yearly raise of 5%, this would translate to a 
nominal annual raise of around 4.89%.

With this assumption, we have

$$
\begin{aligned}
    s(n) & = \left(1 + \frac{a_m}{12}\right)s(n-1) \\
    & = \left(1 + \frac{a_m}{12}\right)^{n}s(0) \\
    & = (1 + a)^{n/12} s(0).
\end{aligned}
$$

Therefore, specifying $a$ and $s(0)$ fully determines the sequence of salaries
$s(1),\ldots,s(N)$.

The final assumption we will use is that voluntary contributions are made as a
constant proportion of monthly salary. Letting this constant equal $x$, we have
that

$$
    p_v(n+1) = x s(n).
$$

Additionally, we restrict $x$ to lie within the range $[0, 0.5]$. Realistically,
nobody is going to be able to set aside more than half of their *gross* salary,
especially once tax and NI contributions are taken into account. 

With these assumptions, we are ready to put our model to use. 

#### Trial running the model
Before blindly putting a model to use, it is always a good idea to develop some 
understanding of how it works in some simple special cases. The simplest 
modelling case is where your initial gross annual salary exceeds £48,835, 
and your salary experiences no growth, so that $a=0$. In this case, you are 
charged the maximum additional interest rate of 3%, so we simply 
have $r(n) \equiv r = 6\%$ for all months $n$. Plugging this into our main 
equation for $d(n+1)$ gives

$$
\begin{aligned}
    d(n+1) & = \left(1 + \frac{r}{12} \right)d(n) - 0.09\left((1 + a)^{n/12} s(0) - l_r\right) - x (1 + a)^{n/12} s(0) \\
    & = \left(1 + \frac{r}{12} \right) d(n) + 0.09l_r - (0.09 + x) s(0).
\end{aligned}
$$

Letting $k := (0.09 + x)s(0) - 0.09l_r$, we find that the above gives

$$
    d(n) = \left(D - \frac{12k}{r}\right)\left(1 + \frac{r}{12}\right)^n + \frac{12k}{r}.
$$

Furthermore, setting $d(n) = 0$ we find that $N$ is the smallest integer greater
than $n$ satisfying

$$
    n = \frac{\log \left(\frac{12k}{12k - rD}\right)}{\log\left(1 + \frac{r}{12}\right)}.
$$

Now we know that the loan is simply written off if it remains after 30 years.
Hence, in order for a full repayment to occur, one must have

$$
   \frac{12k}{12k - rD} < \left(1 + \frac{r}{12}\right)^{360},
$$
Letting $y := \left(1 + \frac{r}{12}\right)^{360} = 6.0226$ and considering the 
point at which one pays off their loan in 30 years exactly, we find that we must 
have

$$
    x = \frac{1}{s(0)}\left(0.09l_r + \frac{rDy}{12(y-1)}\right) - 0.09.
$$

With $D = £40,000$, this gives

$$
    x = \frac{439.17}{s(0)} - 0.09.
$$

Clearly this value is far less than 1 if your monthly salary $s(0)$ exceeds 
£$4070 = 48835/12$. If your yearly salary was exactly $£48835$ then you would 
only have to contribute an additional 2% of your monthly salary to pay off your 
loan in less than the maximum 30 years. But it should also be clear that there 
is a threshold monthly salary $s$ such that if $s(0) > s$ then $x < 0$, i.e. if 
your salary is greater than $s$ then you would end up paying off your student 
loan in less than the maximum 30 years, even **without** additional voluntary 
contributions. In this case, we find that $s=4880$. 

This is the **crux** of the problem. If you are somebody who earns above this 
threshold and don't make extra contributions to your student loan, you will 
end up paying a $9\%$ cut of your gross monthly paycheck in excess of the 
minimum threshold for the **entire** 30 years, in effect **maximising** the
time your loan spends accruing interest, and hence maximising the return the
government earns **at your expense**.

#### Implementation and results
With our framework in place, it was very easy to implement the model in Python.
If you're interested, you can find the code 
on <a href="https://github.com/wndouglas/blog-projects/tree/master/student-debt">GitHub</a>.

One small kink in the implementation was that using monthly compounding led to
very choppy results when comparing different repayment rates. This was remedied
by using a larger compounding period. I chose to use 48 periods per year, i.e. 4
times per month. This led to much cleaner results, while still maintaining the
same relative performance of different strategies.

In the following analysis, we used an initial debt $D = 40,000$, and a yearly
salary raise rate of $a = 0.036$, i.e 3.6%, the average figure in the UK in the 
year of 2019. The plot below demonstrates how the effective
rate of interest you end up paying changes as your initial salary changes. For
a graduate working in London, this figure might land anywhere between £18,000
and £80,000 per year, so this is the range I chose to use.

---

If you're like me (an English or Welsh student who started an undergraduate 
degree anywhere in the UK on or after 1 September 2012 and you took out 
a student loan to help cover your fees), you probably find yourself with a 
significant student loan to your name. Most people I know have come to terms 
with this fact. They treat their loan as an additional *tax* that they will 
have to pay for 30 years after they start working. But is this the best strategy 
for everyone? In particular, after accounting for things like tax, NI 
contributions, rent and living costs, are you better off investing your leftover 
cash, or using some of it to make voluntary loan repayments.

By building a simple **repayment model**, we will investigate 
whether the passive strategy of letting the minimum repayment come out of your 
paycheck automatically is an effective strategy from an investment point of 
view, or whether a student loan holder is better off 
making **early repayment contributions**.

## Simplifying the Terms of the Loan
Looking at the student 
finance <a href="https://www.gov.uk/student-finance">website</a>, you're
presented by a confusing and messy page explaining how repayment works. In
reality, it's *not* that complicated. Here's how it works.

#### How repayment works

If, like me, your course started after 1 September 2012, you have a **Plan 2**
loan. This just means that you will start repaying your loan the first **April** 
after you finish studying, and you will *only* pay anything if your current **gross**
income is over £26,575 a year (or £2,215) a month. You will then pay 9% 
of your gross income **in excess** of this threshold each payment period. If you are 
paid a monthly salary and you earn £2,315 per month, you would then repay 
9% of £2,315 - £2,215 = £100, which is £9 per month.

If you're looking at that £9 per month and thinking 'that doesn't seem like much,
I spend that much on Netflix', I'd firstly recommend jumping in on your parent's
Netlfix account, but I would also recommend **voluntary repayments**. You have 
the right to make extra contributions to your repayment on top of the automatic 
contribution at any time, provided that this payment is larger than £5.

Finally, if you still have an outstanding student loan after 30 years, your 
loan is **written off** and your 50 year old self can relax in the knowledge 
that the last trace of your naive student years is behind you.

#### How the interest works
It is important to realise here that even while you are studying, your loan is
accruing **interest**. While you study, your rate of interest is the UK RPI plus
3%. At the time of writing, UK RPI is at 2.4%. So if you are still studying you 
are paying 5.4% in interest.

Once you are eligible for repayment, you are charged an interest of RPI, plus
an extra sliding charge of between 0% for those earning £26,575 per year or less 
up to 3% for those earning over £47,835 per year. The exact way that the 
additional rate scales from 0% to 3% turns out to be incredibly difficult to 
find in the student finance documents. From a modelling perspective, we will
assume a linear scale between 0% and 3%.

An important detail that doesn't seem to get mentioned anywhere online or on
the student finance documents is the **interest rate schedule** of these interest
payments. According 
to <a href="https://www.ft.com/content/0c56a3ee-60e4-11e7-91a7-502f7ee26895">this</a>
article in the FT, the repayments are **monthly**, and **compound**. To me, this
is an egregious lack of transparency from the government. I spent the good part
of an hour searching for this information, and the only source I could find
was in a subscription newspaper that many students have no access to. The article
shares my view and states that the details of the interest payments is 'hidden in
the small print'. But I digress.

## Building the Model
In order to analyse various different strategies of repayment, it is important 
to lay down both some notation, and also some criteria for comparing approaches. 

#### Notation and framework
In the following, we denote the **total outstanding debt** at the point of 
starting repayment by £$D$. For most students who studied a 3 year undergraduate 
degree after 1 September 2012 and took out a full tuition and maintenance loan,
this quantity will be in the region of £40,000. We denote the 
**total amount paid** towards the loan across its lifetime by £$P$.

Since interest payments and most professional's salaries are paid monthly,
we consider a debtor's **gross monthly salary**. In the $n$th month of repayment 
we will denote this by £$s(n)$ and we will denote the **total outstanding debt** 
in the same month by £$d(n)$. Clearly $d(0) = D$. We then denote the 
**automatic contributions** made towards the loan in the $n$th month by 
$p_a(n)$, and the **voluntary contributions** by $p_v(n)$, giving a 
**total contribution** in month $n$ of $p(n) := p_a(n) + p_v(n)$. Finally, we 
denote the interest accrued on the loan in the $n$th month by $i(n)$.

Next, we denote the **nominal annual rate** on the loan in month $n$ by $r(n)$. 
This is the headline figure of RPI plus an extra rate that we saw above. We
break this rate down into the sum of an **inflation linked component** $r_i(n)$,
and an additional, salary dependent component $r_a(n)$. Assuming a linear scale
between the lower and upper yearly salary thresholds of £26,575 and £47,835, 
which we denote by their equivalent monthly salary figures $l_i$ and $u_i$ 
respectively, we have

$$
r_a(n) = 
\begin{cases}
0, & s(n) < l_i, \\
\frac{0.03}{u_i-l_i}\left(s(n)- l_i\right), & l_i \le s(n) \le u_i, \\
0.03, & s(n) > u_i.
\end{cases}
$$

We then have

$$
r(n) = r_i(n) + r_a(n).
$$ 

Since the interest is charged monthly and is compound, we find that the interest
owed in month $n+1$ is given by
ß
$$
i(n+1) = \frac{r(n)}{12} d(n).
$$

Furthermore, letting the lower repayment threshold be denoted by 
$l_r = £2215 = £26,575/12$, the automatic repayment contribution in month $n+1$ 
is given by

$$
p_a(n+1) =
\begin{cases}
0, & s(n) < l_r,\\
0.09(s(n) - l_r), & s(n) \ge l_r.
\end{cases}
$$

In the following, we will assume that $s(n) \ge l_r$ for each month $n$. It
seems unreasonable to attempt to model the best strategy of paying off your
student loan if you're aren't even earning enough to start paying it off in the
first place!

We're finally ready to give an expression for the outstanding debt at time $n+1$ 
in terms of the quantities in month $n$. This quantity is the sum of the debt 
in month $n$ and the interest accrued in month $n$, minus the payment made at 
the start of month $n+1$. Thus, we have

$$
\begin{aligned}
    d(n+1) & = d(n) + i(n+1) - p(n+1) \\
    & = \left(1 + \frac{r(n)}{12}\right)d(n) - p(n+1).
\end{aligned}
$$

The mathematically inclined will notice that the above represents
a difference equation, the discrete time version of an ordinary differential
equation (ODE). If the repayment term $p(n+1)$ vanished, the above
would simply represent the discrete-time equivalent of an exponential growth 
model, just like any compound investment. All of this is a fancy way of saying 
that if your monthly repayments $p(n+1)$ are not sufficient to outpace the 
interest rate $r(n)$, then you will find yourself on the wrong side of an 
exponential growth curve, and you will *very* quickly find that your student 
debt blows so far out of proportion that early repayment becomes practically 
impossible.

The next step is to introduce another **risky asset or portfolio** with a 
(hopefully) positive return. We will denote the value of this asset in month $n$ 
by $X(n)$ and will assume throughout that this has a constant monthly 
compounding return of $\mu$, i.e. we have

$$
    X(n+1) = \left(1 + \frac{\mu}{12}\right)X(n),
$$

Without loss of generality, we will assume that $X(0) = 1$ so that

$$
    X(n) = \left(1 + \frac{\mu}{12}\right)^n.
$$

In our framework, we will assume that after all outgoings (including living 
costs), our remaining income that we have available to invest, $I(n)$, will be 
a proportion, $f(n) \in [0,1]$, of that months salary $s(n)$, i.e. 

$$
    I(n) = f(n) s(n).
$$

Before we can use this cash, the amount $p_a(n)$ is automatically removed, 
leaving us with $I(n) - p_a(n)$ left to invest.

Finally, we need a measure of our **wealth** at time $n$, which we will denote
by $W(n)$. This value consists of the value of our holdings in the risky asset,
which is given by

$$
    W(n) = Q(n)X(n),
$$

where $Q(n)$ is the quantity of the asset that we hold at time $n$.

At each timestep $n$ we have the choice of investing our remaining income 

$$ 
    I(n) - p_a(n) = f(n) s(n) - 0.09(s(n) - l_r) = s(n)(f(n) - 0.09) + 0.09 l_r
$$ 

in the risky asset, or using our cash to make voluntary loan 
repayments. We use a proportion $x(n) \ge 0$ of this cash to make voluntary 
prepayments, i.e. 

$$
    p_v(n) = x(n)(I(n) - p_a(n)),
$$

and we invest the remainder in the risky asset, i.e. we invest 

$$
    I(n) - p_a(n) - p_v(n) = I(n) - p(n) = (1-x(n))(I(n) - p_a(n)).
$$

in the asset. Therefore, we have

$$
\begin{aligned}
    W(n+1) & = Q(n)X(n+1) + (1-x(n))(I(n) - p_a(n)) \\
     & = Q(n+1)X(n+1),
\end{aligned}
$$

so that 

$$
\begin{aligned}
    Q(n+1) & = Q(n) + \left(\frac{1-x(n)}{X(n+1)}\right)(f(n)s(n) - p_a(n)) \\
    & = Q(n) + \left(\frac{1-x(n)}{X(n+1)}\right)(f(n)s(n) - 0.09(s(n) - l_r)) \\
    & = Q(n) + \left(\frac{1-x(n)}{X(n+1)}\right)((f(n) - 0.09)s(n) + 0.09l_r)), \\
    Q(0) & = 0.
\end{aligned}
$$    

Our goal, then, is to find the optimal sequence of proportions $x(n) \ge 0$ to 
make early repayments with, in order to maximise our terminal wealth $W(N)$. 
Here, $N$ is the final month of repayment, i.e. the 360th month. At this time, 
our debt may or may not have already been written off via earlier repayments.

#### The optimal strategy
Now that we have the notation in place, it is easy to define a **repayment
strategy**. By repayment strategy, I refer to a sequence of additional
repayment contribution fractions $x(1),\ldots,x(N)$.

Our goal is then to find the sequence $x := (x(1),\ldots, x(N))$ that maximises
our terminal wealth, i.e. to find

$$
    \hat{x} := \argmax_{x} W(N; x).
$$

To make this problem tractable, we only consider constant strategies, i.e. 
strategies where $x(n) = x$ for all $n$. There is however, an important extra 
consideration. If we have fully repaid our loan before the terminal date $N$, 
i.e. if $d(n) = 0$ for some $n$, then we **stop** our voluntary repayments, 
so if $k$ is the first index such that $d(k) = 0$ then we have

$$
    x(n) =
    \begin{cases}
        x, & n < k, \\
        0, & n \ge k.
    \end{cases}
$$

It is clear that there are two extreme approaches. The first is to pile all of 
our remaining income into voluntary prepayments. In this case we build up no 
investments until our loan is fully repaid, but as soon as the loan is written 
off we are able to maximally invest into the risky asset. The second is to make 
no voluntary prepayments. In this case we focus on building up our investment 
from the start, but have  less cash to use to invest since we incur an automatic 
repayment for the longest possible period of time.

#### Assumptions
While the framework we have built above is fairly general and allows for a lot
of flexibility in the various different parameters, in order to generate useful
results that we can easily compare, we need to add some assumptions and 
constraints. The aim in this analysis is to give **ballpark figures** for the 
terminal wealth of different strategies, not exact values. What is 
important is that the effectiveness of various strategies **relative** to one 
another is accurately modeled, not necessarily the **absolute** values 
themselves.

A few assumptions have already been *baked in*. One of these is that the maximum
additional interest rate one pays will always be 3% and that the upper and lower
thresholds will remain where they are. The government is capable of changing 
these figures and has done so periodically. Nonetheless, building a model to 
predict where these values are headed in the coming weeks and months is beyond 
the scope of this post, and would be of questionable utility anyway.

An assumption I believe is reasonable is that RPI will remain close to its 
historic average.

<RPI/>

The above plot shows RPI figures for the years 1990-2019. Observe that the values
tend to oscillate around a mean value of 3%. Hence, we will use an RPI of 3% in
our model. I would also argue that a precise estimate of the RPI figure is 
unnecessary. Any increase in RPI that leads to an increase in the 
rate charged on the loan *should* be offset by a corresponding increase in one's
salary.

The next assumption is perhaps the most restrictive but will be very useful
in terms of simplifying our model. We will assume that salary **raises occur 
monthly and at a constant nominal annual rate** of $a_m$. Of course normally 
people get raises occur once a year. There *will* be a slight difference in the 
results  using monthly increases compared to yearly, but again, our purpose 
here is to come up with a tractable model. If a reasonable yearly increase is 
$a$, then we can convert this to a monthly rate $a_m$ via

$$
    a_m = 12\left(\left(1 + a\right)^{1/12} - 1\right).
$$

For example, if we assume a yearly raise of 5%, this would translate to a 
nominal annual raise of around 4.89%.

With this assumption, we have

$$
\begin{aligned}
    s(n) & = \left(1 + \frac{a_m}{12}\right)s(n-1) \\
    & = \left(1 + \frac{a_m}{12}\right)^{n}s(0) \\
    & = (1 + a)^{n/12} s(0).
\end{aligned}
$$

Therefore, specifying $a$ and $s(0)$ fully determines the sequence of salaries
$s(1),\ldots,s(N)$.

The final assumption we will use is that our disposable income, before accounting
for automatic loan repayments, is a **fixed** value, so that $f(n) \equiv f >= 0.09$.
This final constraint is just to ensure positivity of our disposable income. This
assumption seems reasonable. Tax and NI contributions scale relatively linearly with
income, and peoples living costs tend to increase in line with their incomes.

With these assumptions, we are ready to put our model to use. 

#### Trial running the model
Before blindly putting a model to use, it is always a good idea to develop some 
understanding of how it works in some simple special cases. The simplest 
modelling case is where you choose to invest all your disposable income into
voluntary loan repayments, salaries are constant, i.e. $a=0$, and monthly salaries
are larger than the variable interest rating ceiling, i.e. $s(0) > 3986.25$, so
that $r(n) \equiv r = 6\%$.
In this case, $x = 1$ while we have debt remaining,
so

$$
    Q(n+1) = Q(n) = 0,
$$

for all $n$ such that $d(n) > 0$. Furthermore 
$p(n) = p_a(n) + p_v(n) = I(n) = f s(n) = f(1 + a)^{n/12}s(0) = f s(0)$. Then, in month
$n$ our debt is given by

$$
\begin{aligned}
    d(n) & = \left(1 + \frac{r}{12} \right)d(n-1) - f s(0) \\
    & = \left(D - \frac{12f s(0)}{r}\right) \left(1+ \frac{r}{12} \right)^n + \frac{12 f s(0)}{r}.
\end{aligned}
$$

It is easy to see that $d(n)$ is decreasing if and only 
if $f > \frac{r D}{12 s(0)}$. With $r = 6%$ and $D = £40,000$ this 
gives $f > \frac{200}{s(0)}$. Since $s(0) > 3986.25$, we have $\frac{200}{s(0)} < 0.05$,
but $f > 0.09$ by assumption, so $d(n)$ is decreasing for all choices of $f$.

Next, we can find the month in which the loan is written off by setting $d(k) = 0$
and rearranging for $k$, which gives

$$
    k = \left\lceil\frac{\log\left( \frac{12 f s(0)}{12 f s(0) - r D} \right)}{\log\left( 1 + \frac{r}{12}\right)}\right\rceil.
$$

Now we know that the loan is simply written off if it remains after 30 years.
In order for a full repayment to be made before 30 years have passed we require
$k < 360$. Setting $k=360$ and rearranging for $f s(0)$ gives

$$
   f s(0) = \frac{\frac{1}{12} rD \left(1 + \frac{r}{12} \right)^{360}}{\left(1 + \frac{r}{12} \right)^{360} - 1} = 240.
$$

With $s(0) > 3986$, $\frac{240}{s(0)} < 0.06$, so we can be sure that $k < 360$.

Hence, with a total initial debt of £40,000, provided you earn over £3986.25 
per month, the strategy of investing all of your disposable income into 
voluntary loan repayments always leads to clearing all of your debt before it is
written off. You then have the remaining $360 - k$ months to focus your income
entirely on investing in the risky asset.

Starting at $n = k+1$ we have

$$
\begin{aligned}
    W(k) & = 0, \\
    W(n) & = Q(n - 1)X(n - 1), \quad n > k, \\
    Q(n) & = Q(n-1) + \frac{f s(0)}{X(n)}.
\end{aligned}
$$

Therefore,

$$
\begin{aligned}
    W(N) & = Q(N)X(N) \\
    & = \left(Q(N-1) + \frac{f s(0)}{X(N)} \right)X(N) \\
    & = Q(N-1)X(N) + f s(0) \\
    & = \left(1 +\frac{\mu}{12} \right) W(N-1) + f s(0) \\
    & = \left(1 + \frac{\mu}{12}\right)^2 W(N-2) + f s(0)\left(1 + \left(1 +\frac{\mu}{12} \right)\right) \\
    & = \left(1 + \frac{\mu}{12}\right)^{N - k} W(k) + f s(0) \sum_{r = 0}^{N-k-1} \left(1 +\frac{\mu}{12} \right)^r \\
    & = f s(0) \sum_{r = 0}^{N-k-1} \left(1 +\frac{\mu}{12} \right)^r \\
    & = \frac{12}{\mu} f s(0) \left(\left(1 +\frac{\mu}{12} \right)^{N-k-1} - 1\right)
\end{aligned}
$$

On the other extreme is where you choose to invest **none** of your disposable 
income into voluntary loan repayments and again salaries are constant, 
i.e. $a=0$, and monthly salaries are larger than the variable interest rating 
ceiling, i.e. $s(0) > 3986.25$, so that $r(n) \equiv r = 6\%$.

It should be intuitively clear in this case that there is a salary threshold,
below which your loan is never fully repaid before the full 30 years has elapsed.
In this case, we spend the whole 30 year period investing a sub-maximal amount
of our potential disposable income, missing out on later years where we might
have had more cash to invest if we had made some voluntary prepayments. It is
a quick calculation to calculate the salary threshold at which ones loan is never
fully repaid. Using the debt formula $d(n)$, we find $k$ such that $d(k) = 0$
and assume $p_v(n) = 0$ for all $n$, giving

$$
\begin{aligned}
    d(n) & = \left(1 + \frac{r}{12} \right)d(n-1) - 0.09(s(0) - l_r) \\
    & = \left(1 + \frac{r}{12}\right)^n D - \frac{12}{r}0.09(s(0) - l_r) \left(\left(1 + \frac{r}{12}\right)^n - 1\right).
\end{aligned}
$$

Setting $n = 360$, putting $d(360) > 0$ and rearranging for $s(0)$ gives

$$
    \left(1 + \frac{r}{12}\right)^{360} D - \frac{12}{r}0.09(s(0) - l_r) \left(\left(1 + \frac{r}{12}\right)^{360} - 1\right) > 0
$$

or, using $D = 40,000$,

$$
    s(0)  < l_r + \frac{r}{12\cdot 0.09}\frac{\left(1 + \frac{r}{12}\right)^{360}}{\left(\left(1 + \frac{r}{12}\right)^{360} - 1\right)}D = 4880.
$$

This is a sizeable salary. Most people in the UK will never exceed a salary
of £4,880 per month or £58,560 per year! With $s(0) < 4880$, we can calculate
$W(N)$ as before, giving

$$
\begin{aligned}
    W(N) & = Q(N)X(N) \\
    & = \left(1 +\frac{\mu}{12}\right)W(N-1) + (f - 0.09)s(0) + 0.09 l_r \\
    & = \frac{12}{\mu}\left((f - 0.09)s(0) + 0.09 l_r \right) \left(\left(1 +\frac{\mu}{12}\right)^N - 1 \right).
\end{aligned}
$$

Now, suppose that $3986 < s(0) < 4880$, we will use $s(0) = 4200$, $f=0.5$, 
$r = 0.06$ and $D = 40000$. With the values we have used above, we find 
that $k = 21$, i.e. after 21 months your entire student loan will be repaid.
Then, our wealth is greater if we invest all of our disposable income into 
voluntary prepayments than if we invest none into voluntary repayments if

$$
    \frac{12}{\mu}\left((f - 0.09)s(0) + 0.09 l_r \right) \left(\left(1 +\frac{\mu}{12}\right)^N - 1 \right) < \frac{12}{\mu} f s(0) \left(\left(1 +\frac{\mu}{12} \right)^{N-22} - 1\right).
$$

or equivalently

$$
    \left((f - 0.09)s(0) + 0.09 l_r \right) \left(\left(1 +\frac{\mu}{12}\right)^N - 1 \right) < f s(0) \left(\left(1 +\frac{\mu}{12} \right)^{N-22} - 1\right).
$$

Letting $c_1 := (f - 0.09)s(0) + 0.09 l_r$, $c_2 = f s(0)$ and $c_3 = 0.09 (l_r - s(0))$. Rearranging gives

$$
    g(\mu) := c_1 \left(1 +\frac{\mu}{12}\right)^N - c_2 \left(1 +\frac{\mu}{12} \right)^{N-22} - c_3 < 0.
$$

Notice that this function satisfies $g(0) = 0$ and $g$ is monotonic increasing.
This shows that it is **never** a better choice to make full early
repayments in this simple, special case, independent of the return you believe
you can make on your investment.

Perhaps the situation is different once we factor in other considerations, like
partial repayments and salary growth?

#### Implementation and results
With our framework in place, it was easy to implement the model in Python. If
you're interested, you can find the code on GitHub.


